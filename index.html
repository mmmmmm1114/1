<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>NEON APE â€” 2D SHOOTER</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: radial-gradient(circle at top, #151821, #050608);
        font-family: Arial, sans-serif;
        color: white;
    }

    #hud {
        position: fixed;
        top: 10px;
        left: 10px;
        font-size: 18px;
        z-index: 10;
        text-shadow: 0 0 10px #f5ff3b;
    }

    #gameOver {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        background: rgba(0,0,0,0.6);
        backdrop-filter: blur(6px);
        z-index: 20;
        text-align: center;
    }

    #gameOver h1 {
        font-size: 40px;
        margin-bottom: 10px;
        text-shadow: 0 0 20px red;
    }

    #gameOver button {
        padding: 10px 20px;
        font-size: 18px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        background: #f5ff3b;
        color: black;
        font-weight: bold;
        transition: 0.2s;
    }

    #gameOver button:hover {
        transform: scale(1.1);
    }
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="hud">Score: <span id="score">0</span></div>

<div id="gameOver">
    <h1>GAME OVER</h1>
    <p>Your score: <span id="finalScore"></span></p>
    <button onclick="restartGame()">Restart</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let keys = {};
let bullets = [];
let enemies = [];
let particles = [];
let score = 0;
let gameRunning = true;

// PLAYER
const player = {
    x: canvas.width / 2,
    y: canvas.height - 120,
    size: 40,
    speed: 7,
    color: "#f5ff3b"
};

// SHOOT
function shoot() {
    bullets.push({
        x: player.x,
        y: player.y - 20,
        size: 6,
        speed: 10
    });
}

// ENEMY SPAWN
function spawnEnemy() {
    const size = 40;
    enemies.push({
        x: Math.random() * (canvas.width - size),
        y: -size,
        size,
        speed: 3 + Math.random() * 3,
        color: "red"
    });
}

// PARTICLES (explosions)
function spawnParticles(x, y) {
    for (let i = 0; i < 20; i++) {
        particles.push({
            x,
            y,
            size: Math.random() * 4 + 2,
            speedX: (Math.random() - 0.5) * 6,
            speedY: (Math.random() - 0.5) * 6,
            alpha: 1
        });
    }
}

// GAME LOOP
function update() {
    if (!gameRunning) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // PLAYER MOVEMENT
    if (keys["ArrowLeft"] || keys["a"]) player.x -= player.speed;
    if (keys["ArrowRight"] || keys["d"]) player.x += player.speed;

    player.x = Math.max(player.size, Math.min(canvas.width - player.size, player.x));

    // DRAW PLAYER
    ctx.fillStyle = player.color;
    ctx.beginPath();
    ctx.arc(player.x, player.y, player.size, 0, Math.PI * 2);
    ctx.fill();

    // BULLETS
    bullets.forEach((b, i) => {
        b.y -= b.speed;
        ctx.fillStyle = "#78ffc8";
        ctx.fillRect(b.x - 3, b.y, 6, 20);

        if (b.y < 0) bullets.splice(i, 1);
    });

    // ENEMIES
    enemies.forEach((e, i) => {
        e.y += e.speed;

        ctx.fillStyle = e.color;
        ctx.fillRect(e.x, e.y, e.size, e.size);

        // Collision with player
        if (
            e.x < player.x + player.size &&
            e.x + e.size > player.x - player.size &&
            e.y < player.y + player.size &&
            e.y + e.size > player.y - player.size
        ) {
            endGame();
        }

        // Bullet collision
        bullets.forEach((b, j) => {
            if (
                b.x > e.x &&
                b.x < e.x + e.size &&
                b.y > e.y &&
                b.y < e.y + e.size
            ) {
                spawnParticles(e.x + e.size / 2, e.y + e.size / 2);
                enemies.splice(i, 1);
                bullets.splice(j, 1);
                score += 10;
                document.getElementById("score").textContent = score;
            }
        });

        if (e.y > canvas.height) enemies.splice(i, 1);
    });

    // PARTICLES
    particles.forEach((p, i) => {
        p.x += p.speedX;
        p.y += p.speedY;
        p.alpha -= 0.02;

        ctx.fillStyle = `rgba(245,255,59,${p.alpha})`;
        ctx.fillRect(p.x, p.y, p.size, p.size);

        if (p.alpha <= 0) particles.splice(i, 1);
    });

    requestAnimationFrame(update);
}

// END GAME
function endGame() {
    gameRunning = false;
    document.getElementById("finalScore").textContent = score;
    document.getElementById("gameOver").style.display = "flex";
}

// RESTART
function restartGame() {
    score = 0;
    bullets = [];
    enemies = [];
    particles = [];
    gameRunning = true;
    document.getElementById("score").textContent = "0";
    document.getElementById("gameOver").style.display = "none";
    update();
}

// INPUT
window.addEventListener("keydown", (e) => {
    keys[e.key] = true;
    if (e.key === " ") shoot();
});

window.addEventListener("keyup", (e) => {
    keys[e.key] = false;
});

// ENEMY SPAWN LOOP
setInterval(() => {
    if (gameRunning) spawnEnemy();
}, 600);

// START GAME
update();
</script>

</body>
</html>
